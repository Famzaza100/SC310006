<!DOCTYPE html>
<html>
<head>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@5.x/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@3.7.4/dist/vuetify.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/vuetify@3.7.4/dist/vuetify.min.js"></script>
    <title>Online Quiz</title>
</head>
<body>
    <div id="app">
        <v-app>
            <v-main>
                <v-container>
                    <div v-if="step === 'start'">
                        <h1>Welcome to the Quiz</h1>
                        <p>Test your knowledge with our 20-question multiple-choice quiz!</p>
                        <v-btn @click="startQuiz" color="primary">Start Quiz</v-btn>
                    </div>
                    <div v-else-if="step === 'quiz'">
                        <h2>Question {{ currentIndex + 1 }} of {{ questions.length }}</h2>
                        <p>{{ currentQuestion.question }}</p>
                        <v-radio-group v-model="userAnswers[currentIndex]" :key="currentIndex">
                            <v-radio v-for="(choice, index) in currentQuestion.choices" :key="index" :value="choice">
                                {{ choice }}
                            </v-radio>
                        </v-radio-group>
                        <v-btn v-if="currentIndex > 0" @click="prevQuestion" color="secondary">Previous</v-btn>
                        <v-btn v-if="currentIndex < questions.length - 1" @click="nextQuestion" color="primary">Next</v-btn>
                        <v-btn v-if="currentIndex === questions.length - 1" @click="submitQuiz" color="success">Submit</v-btn>
                    </div>
                    <div v-else-if="step === 'result'">
                        <h1>Quiz Results</h1>
                        <p>You scored {{ score }} out of {{ questions.length }}</p>
                        <v-btn @click="resetQuiz" color="primary">Retry</v-btn>
                    </div>
                </v-container>
            </v-main>
        </v-app>
    </div>

    <script>
        const { createApp } = Vue;
        const { createVuetify } = Vuetify;

        const vuetify = createVuetify();

        createApp({
            data() {
                return {
                    step: 'start',
                    questions: [],
                    currentIndex: 0,
                    userAnswers: [],
                    score: 0
                };
            },
            computed: {
                currentQuestion() {
                    return this.questions[this.currentIndex];
                }
            },
            methods: {
                async startQuiz() {
                    // Load questions from JSON
                    const response = await fetch('quiz2.json');
                    this.questions = await response.json();
                    this.userAnswers = new Array(this.questions.length).fill(null);
                    this.step = 'quiz';
                },
                nextQuestion() {
                    if (this.currentIndex < this.questions.length - 1) {
                        this.currentIndex++;
                    }
                },
                prevQuestion() {
                    if (this.currentIndex > 0) {
                        this.currentIndex--;
                    }
                },
                submitQuiz() {
                    this.score = this.questions.reduce((score, question, index) => {
                        return score + (this.userAnswers[index] === question.answer ? 1 : 0);
                    }, 0);
                    this.step = 'result';
                },
                resetQuiz() {
                    this.step = 'start';
                    this.currentIndex = 0;
                    this.userAnswers = [];
                    this.score = 0;
                }
            }
        }).use(vuetify).mount('#app');
    </script>
</body>
</html>
